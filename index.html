<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TRXTESTB Mint</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.1/dist/ethers.umd.min.js"></script>
  <style>
    body{margin:0;padding:40px 20px;background:#0f0f0f;color:#fff;font-family:Arial,sans-serif;text-align:center;min-height:100vh;display:flex;flex-direction:column;justify-content:center}
    h1{color:#00ff99;font-size:3rem;margin:0}
    img{max-width:90%;border-radius:20px;margin:20px auto}
    button{background:#00ff99;color:#000;font-size:1.8rem;padding:16px 40px;border:none;border-radius:12px;cursor:pointer;margin:20px}
    #status{margin-top:20px;font-size:1.3rem}
  </style>
</head>
<body>
  <h1>TRXTESTB</h1>
  <img src="https://via.placeholder.com/400x400/00ff99/000000?text=TRXTESTB" alt="Logo">
  <p>Price: 0.004 MATIC · Polygon Mainnet</p>
  <button id="mintBtn">Connect Wallet & Mint ×1</button>
  <p id="status">Ready</p>

  <script>
    const btn = document.getElementById('mintBtn');
    const status = document.getElementById('status');

    btn.onclick = async () => {
      if (!window.ethereum) return status.textContent = "Install MetaMask";

      try {
        status.textContent = "Connecting...";
        await window.ethereum.request({ method: "eth_requestAccounts" });

        const provider = new ethers.BrowserProvider(window.ethereum);
        const network = await provider.getNetwork();
        if (Number(network.chainId) !== 137) {
          await window.ethereum.request({ method: "wallet_switchEthereumChain", params: [{ chainId: "0x89" }] });
        }

        const signer = await provider.getSigner();
        const contract = new ethers.Contract(
          "0x8963a229A573dC75ec5963e78E33732C6BE92C25",
          ["function publicMint(uint256 amount) public payable"],
          signer
        );

        status.textContent = "Sending transaction...";
        const tx = await contract.publicMint(1, { value: ethers.parseEther("0.004") });
        status.textContent = "Waiting for confirmation...";
        await tx.wait();

        status.textContent = `Minted! Tx: ${tx.hash.slice(0,10)}...`;
      } catch (err) {
        status.textContent = err.shortMessage || err.message || "Rejected";
      }
    };
  </script>
</body>
</html>
